profile::vault::api_addr: "https://vault-kv.example.com:8200"
profile::vault::storage:
  dynamodb:
    ha_enabled: true
    table: "evan-vault-kv"
    region: "ap-northeast-1"
    access_key: "%{lookup('access_key')}"
    secret_key: "%{lookup('secret_key')}"
profile::vault::root_token: "%{lookup('vault_kv_root_token')}"
profile::vault::listener:
  tcp:
    address: "0.0.0.0:8200"
    tls_client_ca_file: /etc/vault.d/tls/ca.crt
    tls_cert_file: /etc/vault.d/tls/chain.crt
    tls_key_file: /etc/vault.d/tls/kv-secrets.key
# Cert Generator
profile::vault::cert_generator::cert_path: "kv-secrets"
profile::vault::cert_generator::cert_cn: "vault-kv.example.com"
profile::vault::cert_generator::vault_address: "http://vault-pki-int.example.com:8200"
profile::vault::cert_generator::vault_token: "%{lookup('vault_pki_int_cert_token')}"
# KV Secrets
profile::vault::kv_secrets::mount_setting:
  type: "kv"
  path: "develop"
  options:
    version: "2"
profile::vault::kv_secrets::policy_setting:
  name: "develop-secret-reader-policy"
  path:
    "develop/*":
      "capabilities": ["read"]
